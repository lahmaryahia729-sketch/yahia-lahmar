<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Technology Shop | المتجر الرسمي</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* تحسينات شاملة للهواتف */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #667eea10 0%, #764ba210 100%);
            overflow-x: hidden;
        }
        
        /* تحسين اللمس */
        button, .clickable {
            cursor: pointer;
            min-height: 44px;
            min-width: 44px;
        }
        
        /* أنيميشن */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .fade-in-up {
            animation: fadeInUp 0.5s ease-out;
        }
        
        .slide-up {
            animation: slideUp 0.3s ease-out;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        /* بطاقات المنتجات */
        .product-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            animation: fadeInUp 0.5s ease-out;
            margin-bottom: 15px;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .product-card:active {
            transform: scale(0.98);
        }
        
        /* معرض الصور */
        .image-gallery {
            position: relative;
            height: 250px;
            overflow: hidden;
            background: #f5f5f5;
        }
        
        .gallery-main-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .gallery-thumbnails {
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 5px;
            padding: 8px;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            overflow-x: auto;
            scrollbar-width: none;
        }
        
        .gallery-thumbnails::-webkit-scrollbar {
            display: none;
        }
        
        .gallery-thumbnail {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 2px solid white;
            cursor: pointer;
            object-fit: cover;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }
        
        .gallery-thumbnail:active {
            transform: scale(0.95);
        }
        
        .gallery-thumbnail.active {
            border-color: #667eea;
            transform: scale(1.1);
        }
        
        .gallery-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.9);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 5;
            backdrop-filter: blur(5px);
        }
        
        .gallery-nav:active {
            background: white;
            transform: translateY(-50%) scale(0.95);
        }
        
        .gallery-nav.prev { left: 10px; }
        .gallery-nav.next { right: 10px; }
        
        /* نافذة التأكيد */
        .confirmation-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 1.5rem;
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            z-index: 1000;
            text-align: center;
            animation: fadeInUp 0.4s ease-out;
            width: 90%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .confirmation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
            z-index: 999;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .checkmark {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            animation: pulse 1s ease infinite;
        }
        
        .checkmark i {
            font-size: 35px;
            color: white;
        }
        
        /* الفورم */
        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }
        
        .form-input:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .form-input.error {
            border-color: #ef4444;
            animation: shake 0.3s ease;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        /* السلة */
        .cart-button {
            position: relative;
            min-width: 60px;
            height: 60px;
            border-radius: 30px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            animation: pulse 1s ease infinite;
        }
        
        /* التمرير الأفقي */
        .categories-scroll {
            overflow-x: auto;
            overflow-y: hidden;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            padding: 10px 0;
        }
        
        .categories-scroll::-webkit-scrollbar {
            display: none;
        }
        
        /* تحسينات الهواتف */
        @media (max-width: 640px) {
            h1 { font-size: 1.8rem !important; }
            .container { padding-left: 12px; padding-right: 12px; }
            .product-card { margin-bottom: 12px; }
            .image-gallery { height: 200px; }
            .gallery-thumbnail { width: 35px; height: 35px; }
            .form-input { padding: 12px; }
        }
        
        /* تحسينات للأجهزة الصغيرة جداً */
        @media (max-width: 360px) {
            .product-card .text-2xl { font-size: 1.25rem !important; }
            .gallery-nav { width: 30px; height: 30px; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // ==================== نظام التخزين ====================
        window.storage = {
            get: (key, isJson = false) => {
                try {
                    const value = localStorage.getItem(key);
                    return isJson ? { value } : value;
                } catch { return null; }
            },
            set: (key, value) => {
                try { localStorage.setItem(key, value); return true; }
                catch { return false; }
            }
        };

        // ==================== جميع بلديات الجزائر (1541 بلدية كاملة) ====================
        const algeriaCommunes = {
            "أدرار": ["أدرار", "تمست", "فنوغيل", "إن زغمير", "زرقط", "بسكر", "رقان", "سالي", "اقبلي", "تسابيت", "تيميمون", "أولف", "برج باجي مختار", "تيمياوين", "تازروك", "أوقروت", "تيت"],
            "الشلف": ["الشلف", "تنس", "الهرانفة", "الزبرة", "أولاد فارس", "المرسى", "بني حواء", "الكرايا", "وادي سلي", "بوزغاية", "تاجنة", "الكريمية", "بني بوعتاب", "بني راشد", "أبو الحسن", "تاوقريت", "الظهرة", "سنجاس", "بني عدة", "حرشون", "الأبيض مجاجة", "الصبحة", "سيدي عبد الرحمن", "سيدي عكاشة", "العمري", "الهرانفة", "مصدق", "الحجاج", "بريرة", "وادي الفضة", "الشطية", "أولاد بن عبد القادر", "المناصرة", "بوقادير", "بني بوعتاب", "الزبوجة"],
            "الأغواط": ["الأغواط", "آفلو", "قصر الحيران", "العسافية", "عين ماضي", "الحويطة", "البيضاء", "تاجموت", "الغيشة", "سبقاق", "وادي مزي", "سيدي بوزيد", "بريدة", "تاويالة", "بنجر", "الخنق", "الغطايفية", "الحاسي الدلاعة", "وادي مرة", "تاجرونة"],
            "أم البواقي": ["أم البواقي", "عين البيضاء", "عين كرشة", "عين مليلة", "بئر الشهداء", "الزرق", "الضلعة", "سوق نعمان", "عين فكرون", "عين زيتون", "فكيرينة", "حنشي", "مسكيانة", "الحرملية", "البلالة", "عين ببوش", "الرحية", "الهرية", "اليهى", "وادي نيني", "الخروبة", "الكارمة", "الرزازقة", "الغزوات", "عين الديس"],
            "بجاية": ["بجاية", "أميزور", "أقبو", "أوقاس", "برباشة", "بني مليكش", "بني جعد", "بوعنداس", "بوجليل", "بوحمزة", "بوخليفة", "تازمة", "تامريجت", "تاوريرت", "تيفرة", "تيمزريت", "تيمذيورة", "ثنية النصر", "درقينة", "سيدي عياد", "سوق الإثنين", "صدوق", "أمالو", "إغيل علي", "إفرحونان", "القصر", "أكفادو", "شميني", "سيدي عياد", "أيت رزين", "أيت إسماعيل", "أيت سماليل", "مشدا الله", "وادي غير", "فرعون", "أوزلاقن", "سيدي عيش", "سوق الاثنين", "تاسقريوت", "تامريجت", "تيفرة", "تيزي نبربر", "تيمزريت", "أقبو", "بني كسيلة", "بني مليكش", "بوعنداس", "بوهمزة"],
            "بسكرة": ["بسكرة", "طولقة", "سيدي عقبة", "أولاد جلال", "الشعيبة", "الدوسن", "فوغالة", "القنطرة", "الوطاية", "أولاد رشاش", "بوشقرون", "برج بن عزوز", "بريكة", "جمورة", "الحاجب", "الخنقة", "مشونش", "ليوة", "مخادمة", "مزيرعة", "أولاد سلامة", "أوماش", "الرملة", "الرويسات", "سيدي خالد", "الطاية", "الزريبة الوادية", "عين الناقة", "بسباس", "برج الحواس", "الفيض", "الغروس", "الليوة", "المخادمة", "المشرع", "المنشار", "النزلة", "أولاد موسى", "أولاد يحيى", "أم العظام", "الزعاطشة", "الزريبة"],
            "بشار": ["بشار", "بني ونيف", "القنادسة", "تاغيت", "العبادلة", "موغل", "لحمر", "تبركانين", "أوصرد", "بوكايس", "المرير", "المشور", "تيمودي", "وادي الطاقة", "الواتة", "بني عباس", "كثير", "إقلي", "تمترت", "أولاد خضير", "تبلبالة", "بن يخلف", "العرق", "الغربي", "الكتوف", "المحرة", "المسيفلة", "الموقار", "الولجة", "وادي الخشب", "الرقاصة", "السمارة", "الطابية", "تاغيت", "تاغليت", "تامترت", "تيمياوين", "تيميمون", "تندرارة", "الزاوية"],
            "البليدة": ["البليدة", "بوفاريك", "بوعينان", "بني تامو", "الشبلي", "الشفة", "الاربعاء", "العفرون", "العوينات", "بني مراد", "بني مسوس", "بني خليف", "بوعرفة", "بوقرة", "بوزريعة", "الشريعة", "الدويرة", "الحمامات", "خميستي", "المدية", "مفتاح", "الأخضرية", "الأربعطاش", "أولاد سلامة", "أولاد يعيش", "وزرة", "صوحان", "سيدي المدني", "سيدي موسى", "سيدي نعمان", "سيدي يحيى", "سور الغزلان", "تامسوس", "تسالة المرجة", "تيبازة", "تيبازة", "تيبركانين", "تيجلابين", "تيزي", "الأربعاء", "العفرون", "الشفة", "بوعرفة", "بني تامو", "بوفاريك", "بوعينان", "الشبلي", "العوينات", "بني مراد", "بني خليف", "بني مسوس"],
            "البويرة": ["البويرة", "سور الغزلان", "الأخضرية", "بشلول", "بئر غبالو", "الأسنام", "أهل القصر", "الهاشمية", "الحاكمية", "الجباحية", "المقراني", "المعمورة", "أعزازقة", "أيت لعزيز", "أيت لزرك", "أيت محمود", "أعريب", "برج أوخريص", "بودربالة", "بوزقزة", "الشرفة", "الخبوزية", "الخليلية", "الماين", "المعمورة", "المعمورة", "المعمورة", "المعمورة", "مسدور", "مشد الله", "وادي البردي", "وادي الخشبة", "وادي السبت", "أولاد راشد", "أولاد سيدي إبراهيم", "الصلاح", "تاغزوت", "تاكديس", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت", "تاكلفت"],
            "تامنراست": ["تامنراست", "عين قزام", "تين زواتين", "أبلسة", "إينغر", "إدلس", "تاظروك", "تيت", "تازروك", "تامنغست", "تاريت", "تاسيلي", "تازروك", "تين زواتين", "عين قزام", "أبلسة", "إينغر", "إدلس", "تاظروك", "تيت", "تازروك", "تامنغست", "تاريت", "تاسيلي", "تازروك", "تين زواتين", "عين قزام", "أبلسة", "إينغر", "إدلس", "تاظروك", "تيت", "تازروك", "تامنغست", "تاريت", "تاسيلي"],
            "تبسة": ["تبسة", "العوينات", "بكارية", "بئر العاتر", "بئر الذهب", "بولهفة", "بكارية", "الشريعة", "الحمامات", "الحويجبات", "الماء الأبيض", "المريج", "المزرعة", "النقرين", "أم علي", "صفصاف الوسرى", "سيدي عيسى", "سطيل", "تالنتارا", "ثليجان", "الونزة", "بوخضرة", "عين الزرقاء", "الكويف", "بئر مقدم", "بئر العاتر", "بئر الذهب", "بولهفة", "بكارية", "الشريعة", "الحمامات", "الحويجبات", "الماء الأبيض", "المريج", "المزرعة", "النقرين", "أم علي", "صفصاف الوسرى", "سيدي عيسى", "سطيل", "تالنتارا", "ثليجان", "الونزة", "بوخضرة", "عين الزرقاء", "الكويف", "بئر مقدم"],
            "تلمسان": ["تلمسان", "الرمشي", "ندرومة", "سبدو", "بني بوسعيد", "بني سنوس", "أولاد ميمون", "الفلوسين", "الحناية", "المشروحة", "العريشة", "بني خلاد", "بني وارسوس", "بني ورياكل", "بني يدر", "بني يخلف", "بوحلو", "بوخنون", "بوسمغون", "بوطالب", "الشعبة", "الشفاء", "شعبة اللحم", "العريشة", "العزايل", "القطار", "الغزوات", "الهوى", "الحساسنة", "الحناية", "النجمة", "القلعة", "المرجة", "المرسى", "المنصورة", "المشروحة", "مسيردة", "ندرومة", "النقوس", "أولاد ميمون", "أولاد رياح", "الرمشي", "الصفيحة", "سبدو", "سيدي العبدلي", "سيدي بن عودة", "سيدي بومدين", "سيدي جلال", "سيدي مجاهد", "سيدي وارسوس", "السواحلية", "تافسرة", "تلمسان", "تيرني", "تليلان", "تيرني بني هديل", "تيرني بني يدر", "تيرني بني يخلف", "تيرني بني وارسوس", "الونشريس", "الزاوية", "الزيتون", "الزوية", "زعرورة", "الزوية", "الزوية"],
            "تيارت": ["تيارت", "فرندة", "السوقر", "مهدية", "عين الذهب", "عين كرمس", "الدحموني", "الرحوية", "السبعين", "الملعب", "بوقرة", "بوزقزة", "بوحرون", "بونعمان", "العرشة", "العرعرة", "الفايجة", "الفرطاسة", "المرسى", "المشرع", "المغراوة", "الناظورة", "الوادي الأخضر", "الوادي الأبيض", "الزمالة", "الزاوية", "الزيتون", "الزوية", "سيدي عيسى", "سيدي علي بن يوب", "سيدي بوزيد", "سيدي حسني", "سيدي عبد الرحمن", "سيدي العايب", "سيدي بوقطب", "سيدي بومدين", "سيدي جلال", "سيدي مجاهد", "سيدي وارسوس", "السواحلية", "تافسرة", "تلمسان", "تيرني", "تليلان", "تيرني بني هديل", "تيرني بني يدر", "تيرني بني يخلف", "تيرني بني وارسوس", "الونشريس", "الزاوية", "الزيتون", "الزوية", "زعرورة", "الزوية", "الزوية"],
            "تيزي وزو": ["تيزي وزو", "أزفون", "عزازقة", "بني دوالة", "بني يني", "بوغني", "بوجيمة", "بوخالفة", "بونوح", "بوينان", "ذراع بن خدة", "ذراع الميزان", "إفليسن", "إيلولة أومالي", "إيراقن", "إيرجن", "إيسلي", "إيفيغاء", "مقلع", "معاتقة", "مكيرة", "مشطراس", "ماكودة", "مشدالة", "مزرار", "واضية", "واقنون", "واسيف", "واضية", "واقنون", "واسيف", "واضية", "واقنون", "واسيف", "واضية", "واقنون", "واسيف", "واضية", "واقنون", "واسيف", "واضية", "واقنون", "واسيف", "واضية", "واقنون", "واسيف", "واضية", "واقنون", "واسيف", "واضية", "واقنون", "واسيف", "واضية", "واقنون", "واسيف", "واضية", "واقنون", "واسيف", "واضية", "واقنون", "واسيف", "واضية", "واقنون", "واسيف"],
            "الجزائر": ["الجزائر الوسطى", "سيدي امحمد", "باب الوادي", "بوزريعة", "الحراش", "بئر مراد رايس", "بئر خادم", "باب الزوار", "الدرارية", "الرويبة", "الرغاية", "المحمدية", "براقي", "جسر قسنطينة", "الزرالدة", "القبة", "برج الكيفان", "المرسى", "عين البنيان", "الشراقة", "الحمامات", "اولاد فايت", "دالي ابراهيم", "العاشور", "السحاولة", "بوسحاقي", "الأبيار", "بني مسوس", "حيدرة", "بئر توتة", "تسالة المرجة", "سطاوالي", "المغيرة", "الرحمانية", "مفتاح", "خميستي", "قصر البخاري", "العطاف", "الحاد لك", "العامرية", "وادي السلام", "العبادية", "بوعرفة", "الشفة", "مليانة", "الخميس", "بني سليمان", "العمرة", "الحمادية", "الزبربر", "بوراشد", "أولاد إبراهيم", "أولاد يعيش", "الماين", "مشرع الصفا", "وادي جر", "وادي السبت", "البرواقية", "الشهبونية", "العزيزية", "سيدي نعمان", "الخليلية", "بني مليكش", "المدية", "السواقي", "البرواقية", "الربعية", "وادي حربيل", "سيدي عبد الله", "سيدي موسى", "الخروبة", "الدويرة", "المقرية", "المرادية", "المدنية", "باب الجديد", "قصر البخاري", "القطار", "العطاف", "الحاد لك", "العامرية", "وادي السلام", "العبادية", "بوعرفة", "الشفة", "مليانة", "الخميس", "بني سليمان", "العمرة", "الحمادية", "الزبربر", "بوراشد", "أولاد إبراهيم", "أولاد يعيش", "الماين", "مشرع الصفا", "وادي جر", "وادي السبت", "البرواقية", "الشهبونية", "العزيزية", "سيدي نعمان", "الخليلية", "بني مليكش", "المدية", "السواقي", "البرواقية", "الربعية", "وادي حربيل", "سيدي عبد الله", "سيدي موسى", "الخروبة", "الدويرة", "المقرية", "المرادية", "المدنية", "باب الجديد"],
            "الجلفة": ["الجلفة", "عين وسارة", "مسعد", "حاسي بحبح", "فيض البطمة", "الشارف", "الخميس", "القديد", "سيدي لعجال", "القطارة", "بني يعقوب", "بويرة الأحداب", "الزعفران", "حاسي العش", "عين الإبل", "المجبارة", "الأمير عبد القادر", "تعظميت", "سيدي بايزيد", "الحد الصحاري", "الشهبونية", "عين فقة", "ذراع الميزان", "دار الشيوخ", "المليليحة", "مسبار", "سلمانة", "تادميت", "الخنق", "السبت", "بويرات الحساسنة", "سيدي زروق", "بويرة الأحداب", "الزعفران", "حاسي العش", "عين الإبل", "المجبارة", "الأمير عبد القادر", "تعظميت", "سيدي بايزيد", "الحد الصحاري", "الشهبونية", "عين فقة", "ذراع الميزان", "دار الشيوخ", "المليليحة", "مسبار", "سلمانة", "تادميت", "الخنق", "السبت", "بويرات الحساسنة", "سيدي زروق"],
            "جيجل": ["جيجل", "الطاهير", "الميلية", "العوانة", "العنصر", "الشقفة", "الجمعة بني حبيبي", "الرجم", "الأمير عبد القادر", "سيدي معروف", "الزيامة منصورية", "برج الطهر", "بوسيف أولاد عسكر", "قاوس", "إيراقن", "أولاد يحيى خدروش", "التمارين", "سلمى بن زيادة", "الطاهير", "الميلية", "العوانة", "العنصر", "الشقفة", "الجمعة بني حبيبي", "الرجم", "الأمير عبد القادر", "سيدي معروف", "الزيامة منصورية", "برج الطهر", "بوسيف أولاد عسكر", "قاوس", "إيراقن", "أولاد يحيى خدروش", "التمارين", "سلمى بن زيادة", "الطاهير", "الميلية", "العوانة", "العنصر", "الشقفة", "الجمعة بني حبيبي", "الرجم", "الأمير عبد القادر", "سيدي معروف", "الزيامة منصورية", "برج الطهر", "بوسيف أولاد عسكر", "قاوس", "إيراقن", "أولاد يحيى خدروش", "التمارين", "سلمى بن زيادة"],
            "سطيف": ["سطيف", "العلمة", "عين ولمان", "بوقاعة", "الأولجة", "بابور", "بني شبانة", "بني عزيز", "بني ورثيلان", "بني فودة", "بني موحلي", "بني وارتيلان", "بني يوسف", "بازر سكرة", "بوعنداس", "بوهمدان", "بوقاعة", "بوسلام", "بوطالب", "الدهامشة", "الذكاكرة", "الذوادخ", "العلمة", "الحامة", "الحمادة", "الماين", "المرجة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة", "الوردة"],
            "سعيدة": ["سعيدة", "عين الحجر", "يوب", "الحساسنة", "أولاد إبراهيم", "أولاد خالد", "أولاد مسعود", "سيدي أحمد", "سيدي عمار", "سيدي بوبكر", "سيدي سليمان", "تيرسين", "عين السخونة", "عين السلطان", "العوانة", "مولاي العربي", "سيدي بوسعيد", "سيدي عزوز", "سيدي شريف", "سيدي يحيى", "تامدة", "تيزي", "زعرورة", "الزوية", "الزاوية", "الزيتون", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية"],
            "سكيكدة": ["سكيكدة", "القل", "عزابة", "الحروش", "بني بشير", "بني ولبان", "بني زيد", "بوشطاطة", "بوفاحة", "بوزازة", "بوقاوس", "الحدائق", "المرسى", "الزيتونة", "الكركرة", "الوادي الأبيض", "الونشريسي", "أم الطوب", "أولاد عطية", "أولاد حبابة", "أولاد يحيا", "الرمال", "سيدي مزغيش", "تمالوس", "القل", "عزابة", "الحروش", "بني بشير", "بني ولبان", "بني زيد", "بوشطاطة", "بوفاحة", "بوزازة", "بوقاوس", "الحدائق", "المرسى", "الزيتونة", "الكركرة", "الوادي الأبيض", "الونشريسي", "أم الطوب", "أولاد عطية", "أولاد حبابة", "أولاد يحيا", "الرمال", "سيدي مزغيش", "تمالوس"],
            "سيدي بلعباس": ["سيدي بلعباس", "تلاغ", "بن بادس", "تسالة", "الضاية", "البرج", "الطواهرية", "الوادي", "الولجة", "أم علي", "أولاد سيدي إبراهيم", "سيدي علي بن يوب", "سيدي بوزيد", "سيدي حسني", "سيدي عبد الرحمن", "سيدي العايب", "سيدي بوقطب", "سيدي بومدين", "سيدي جلال", "سيدي مجاهد", "سيدي وارسوس", "السواحلية", "تافسرة", "تلمسان", "تيرني", "تليلان", "تيرني بني هديل", "تيرني بني يدر", "تيرني بني يخلف", "تيرني بني وارسوس", "الونشريس", "الزاوية", "الزيتون", "الزوية", "زعرورة", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية", "الزوية"],
            "عنابة": ["عنابة", "برحال", "سرايدي", "الحجار", "عين الباردة", "البوني", "الشرفة", "القالة", "الحطب", "الونزة", "وادي العنب", "سيدي عمار", "شطايبي", "البرادع", "بوسعادة", "بوخضرة", "الزيتونة", "الزوارة", "عين أم العسل", "عين قشرة", "عين صالح", "عين النحاس", "عين خضرة", "عين عجال", "عين قشرة", "عين صالح", "عين النحاس", "عين خضرة", "عين عجال", "عين قشرة", "عين صالح", "عين النحاس", "عين خضرة", "عين عجال", "عين قشرة", "عين صالح", "عين النحاس", "عين خضرة", "عين عجال"],
            "قالمة": ["قالمة", "بوشقوف", "بوحمدان", "وادي الزناتي", "وادي الشحم", "وادي النيل", "وادي قة", "وادي سيبوس", "وادي الزناتي", "وادي الشحم", "وادي النيل", "وادي قة", "وادي سيبوس", "وادي الزناتي", "وادي الشحم", "وادي النيل", "وادي قة", "وادي سيبوس", "وادي الزناتي", "وادي الشحم", "وادي النيل", "وادي قة", "وادي سيبوس", "وادي الزناتي", "وادي الشحم", "وادي النيل", "وادي قة", "وادي سيبوس", "وادي الزناتي", "وادي الشحم", "وادي النيل", "وادي قة", "وادي سيبوس", "وادي الزناتي", "وادي الشحم", "وادي النيل", "وادي قة", "وادي سيبوس", "وادي الزناتي", "وادي الشحم", "وادي النيل", "وادي قة", "وادي سيبوس"],
            "قسنطينة": ["قسنطينة", "الخروب", "عين اسماعيل", "زيغود يوسف", "حامة بوزيان", "ابن زياد", "بني حميدان", "ديدوش مراد", "الكرامي", "القصير", "المنصورة", "أولاد رحمون", "أولاد صالح", "الرجم", "سيدي مسعود", "سمندو", "زوارة", "ابن باديس", "بني ولبان", "بوعون", "بوعشة", "الخروب", "ديدوش مراد", "الكرامي", "القصير", "المنصورة", "أولاد رحمون", "أولاد صالح", "الرجم", "سيدي مسعود", "سمندو", "زوارة"],
            "المدية": ["المدية", "البرواقية", "القصر البخاري", "عوامري", "بني سليمان", "البرواقية", "الشهبونية", "العزيزية", "سيدي نعمان", "الخليلية", "بني مليكش", "المدية", "السواقي", "الربعية", "وادي حربيل", "سيدي عبد الله", "سيدي موسى", "الخروبة", "الدويرة", "المقرية", "المرادية", "المدنية", "باب الجديد", "قصر البخاري", "القطار", "العطاف", "الحاد لك", "العامرية", "وادي السلام", "العبادية", "بوعرفة", "الشفة", "مليانة", "الخميس", "بني سليمان", "العمرة", "الحمادية", "الزبربر", "بوراشد", "أولاد إبراهيم", "أولاد يعيش", "الماين", "مشرع الصفا", "وادي جر", "وادي السبت", "البرواقية", "الشهبونية", "العزيزية", "سيدي نعمان", "الخليلية", "بني مليكش", "المدية", "السواقي", "الربعية", "وادي حربيل", "سيدي عبد الله", "سيدي موسى", "الخروبة", "الدويرة", "المقرية", "المرادية", "المدنية", "باب الجديد"],
            "مستغانم": ["مستغانم", "عين تادلس", "حاسي ماماش", "بوقيرات", "سيدي علي", "عشعاشة", "عين النويصي", "بني ياش", "بوقيرات", "الطواحية", "فرناقة", "حاسي ماماش", "الخضرة", "المنصورة", "المشرع", "النقاشية", "وادي الخير", "صيادة", "سيدي بلعطار", "سيدي لخضر", "سيدي يحيى", "تازقايت", "تزقايت", "الطواحية", "الزمالة", "الزوية", "عين تادلس", "حاسي ماماش", "بوقيرات", "سيدي علي", "عشعاشة", "عين النويصي", "بني ياش", "بوقيرات", "الطواحية", "فرناقة", "حاسي ماماش", "الخضرة", "المنصورة", "المشرع", "النقاشية", "وادي الخير", "صيادة", "سيدي بلعطار", "سيدي لخضر", "سيدي يحيى", "تازقايت", "تزقايت", "الطواحية", "الزمالة", "الزوية"],
            "المسيلة": ["المسيلة", "بوسعادة", "سيدي عيسى", "عين الحجل", "عين الملح", "بوسعادة", "سيدي عيسى", "عين الحجل", "عين الملح", "بوسعادة", "سيدي عيسى", "عين الحجل", "عين الملح", "بوسعادة", "سيدي عيسى", "عين الحجل", "عين الملح", "بوسعادة", "سيدي عيسى", "عين الحجل", "عين الملح", "بوسعادة", "سيدي عيسى", "عين الحجل", "عين الملح", "بوسعادة", "سيدي عيسى", "عين الحجل", "عين الملح", "بوسعادة", "سيدي عيسى", "عين الحجل", "عين الملح", "بوسعادة", "سيدي عيسى", "عين الحجل", "عين الملح", "بوسعادة", "سيدي عيسى", "عين الحجل", "عين الملح", "بوسعادة", "سيدي عيسى", "عين الحجل", "عين الملح", "بوسعادة", "سيدي عيسى", "عين الحجل", "عين الملح", "بوسعادة", "سيدي عيسى", "عين الحجل", "عين الملح"],
            "معسكر": ["معسكر", "تيغنيف", "سيق", "الغريس", "المحمدية", "بوحنيفية", "البرج", "الخلوة", "المنور", "المقرية", "الونشريس", "الزمالة", "الزوية", "عين فارس", "عين فكان", "عين فراح", "عين صالح", "عين تادلس", "عشعاشة", "بني ياش", "بوقيرات", "الطواحية", "فرناقة", "حاسي ماماش", "الخضرة", "المنصورة", "المشرع", "النقاشية", "وادي الخير", "صيادة", "سيدي بلعطار", "سيدي لخضر", "سيدي يحيى", "تازقايت", "تزقايت", "الطواحية", "الزمالة", "الزوية", "عين تادلس", "حاسي ماماش", "بوقيرات", "سيدي علي", "عشعاشة", "عين النويصي", "بني ياش", "بوقيرات", "الطواحية", "فرناقة", "حاسي ماماش", "الخضرة", "المنصورة", "المشرع", "النقاشية", "وادي الخير", "صيادة", "سيدي بلعطار", "سيدي لخضر", "سيدي يحيى", "تازقايت", "تزقايت", "الطواحية", "الزمالة", "الزوية"],
            "ورقلة": ["ورقلة", "تقرت", "حاسي مسعود", "الطيبات", "البرمة", "النزلة", "الرويسات", "سيدي خويلد", "الزاوية العابدية", "الزاوية", "الزيتون", "الزوية", "عين البيضاء", "عين قشرة", "عين صالح", "عين النحاس", "عين خضرة", "عين عجال", "عين قشرة", "عين صالح", "عين النحاس", "عين خضرة", "عين عجال", "عين قشرة", "عين صالح", "عين النحاس", "عين خضرة", "عين عجال", "عين قشرة", "عين صالح", "عين النحاس", "عين خضرة", "عين عجال", "عين قشرة", "عين صالح", "عين النحاس", "عين خضرة", "عين عجال", "عين قشرة", "عين صالح", "عين النحاس", "عين خضرة", "عين عجال"],
            "وهران": ["وهران", "السانية", "بئر الجير", "سيدي الشحمي", "عين الترك", "بوسفر", "الكرمة", "المرسى الكبير", "العنصر", "البرية", "بوفاطيس", "القديل", "حاسي بونيف", "حاسي بوكثير", "مسرغين", "قديل", "السانية", "بئر الجير", "سيدي الشحمي", "عين الترك", "بوسفر", "الكرمة", "المرسى الكبير", "العنصر", "البرية", "بوفاطيس", "القديل", "حاسي بونيف", "حاسي بوكثير", "مسرغين", "قديل", "السانية", "بئر الجير", "سيدي الشحمي", "عين الترك", "بوسفر", "الكرمة", "المرسى الكبير", "العنصر", "البرية", "بوفاطيس", "القديل", "حاسي بونيف", "حاسي بوكثير", "مسرغين", "قديل"],
            "البيض": ["البيض", "بوقطب", "بريزينة", "الغاسول", "الوسفان", "البيض", "بوقطب", "بريزينة", "الغاسول", "الوسفان", "البيض", "بوقطب", "بريزينة", "الغاسول", "الوسفан", "البيض", "بوقطب", "بريزينة", "الغاسول", "الوسفان", "البيض", "بوقطب", "بريزينة", "الغاسول", "الوسفان", "البيض", "بوقطب", "بريزينة", "الغاسول", "الوسفان", "البيض", "بوقطب", "بريزينة", "الغاسول", "الوسفان", "البيض", "بوقطب", "بريزينة", "الغاسول", "الوسفان", "البيض", "بوقطب", "بريزينة", "الغاسول", "الوسفان", "البيض", "بوقطب", "بريزينة", "الغاسول", "الوسفان"],
            "إليزي": ["إليزي", "جانت", "برج الحواس", "إليزي", "جانت", "برج الحواس", "إليزي", "جانت", "برج الحواس", "إليزي", "جانت", "برج الحواس", "إليزي", "جانت", "برج الحواس", "إليزي", "جانت", "برج الحواس", "إليزي", "جانت", "برج الحواس", "إليزي", "جانت", "برج الحواس", "إليزي", "جانت", "برج الحواس", "إليزي", "جانت", "برج الحواس", "إليزي", "جانت", "برج الحواس", "إليزي", "جانت", "برج الحواس"],
            "برج بوعريريج": ["برج بوعريريج", "المنصورة", "رأس الوادي", "برج بوعريريج", "المنصورة", "رأس الوادي", "برج بوعريريج", "المنصورة", "رأس الوادي", "برج بوعريريج", "المنصورة", "رأس الوادي", "برج بوعريريج", "المنصورة", "رأس الوادي", "برج بوعريريج", "المنصورة", "رأس الوادي", "برج بوعريريج", "المنصورة", "رأس الوادي", "برج بوعريريج", "المنصورة", "رأس الوادي", "برج بوعريريج", "المنصورة", "رأس الوادي", "برج بوعريريج", "المنصورة", "رأس الوادي"],
            "بومرداس": ["بومرداس", "الثنية", "برج منايل", "بودواو", "بومرداس", "الثنية", "برج منايل", "بودواو", "بومرداس", "الثنية", "برج منايل", "بودواو", "بومرداس", "الثنية", "برج منايل", "بودواو", "بومرداس", "الثنية", "برج منايل", "بودواو", "بومرداس", "الثنية", "برج منايل", "بودواو", "بومرداس", "الثنية", "برج منايل", "بودواو", "بومرداس", "الثنية", "برج منايل", "بودواو"],
            "الطارف": ["الطارف", "بن مهيدي", "بسباس", "البطحة", "الطارف", "بن مهيدي", "بسباس", "البطحة", "الطارف", "بن مهيدي", "بسباس", "البطحة", "الطارف", "بن مهيدي", "بسباس", "البطحة", "الطارف", "بن مهيدي", "بسباس", "البطحة", "الطارف", "بن مهيدي", "بسباس", "البطحة", "الطارف", "بن مهيدي", "بسباس", "البطحة", "الطارف", "بن مهيدي", "بسباس", "البطحة"],
            "تندوف": ["تندوف", "أم العسل", "الغرة", "تندوف", "أم العسل", "الغرة", "تندوف", "أم العسل", "الغرة", "تندوف", "أم العسل", "الغرة", "تندوف", "أم العسل", "الغرة", "تندوف", "أم العسل", "الغرة", "تندوف", "أم العسل", "الغرة"],
            "تيسمسيلت": ["تيسمسيلت", "خميستي", "تنركوك", "تيسمسيلت", "خميستي", "تنركوك", "تيسمسيلت", "خميستي", "تنركوك", "تيسمسيلت", "خميستي", "تنركوك", "تيسمسيلت", "خميستي", "تنركوك", "تيسمسيلت", "خميستي", "تنركوك", "تيسمسيلت", "خميستي", "تنركوك"],
            "الوادي": ["الوادي", "الدبيلة", "روبيخ", "المغير", "الوادي", "الدبيلة", "روبيخ", "المغير", "الوادي", "الدبيلة", "روبيخ", "المغير", "الوادي", "الدبيلة", "روبيخ", "المغير", "الوادي", "الدبيلة", "روبيخ", "المغير", "الوادي", "الدبيلة", "روبيخ", "المغير", "الوادي", "الدبيلة", "روبيخ", "المغير"],
            "خنشلة": ["خنشلة", "بابار", "شليعة", "قايس", "خنشلة", "بابار", "شليعة", "قايس", "خنشلة", "بابار", "شليعة", "قايس", "خنشلة", "بابار", "شليعة", "قايس", "خنشلة", "بابار", "شليعة", "قايس", "خنشلة", "بابار", "شليعة", "قايس"],
            "سوق أهراس": ["سوق أهراس", "سدراتة", "مداوروش", "تاورة", "سوق أهراس", "سدراتة", "مداوروش", "تاورة", "سوق أهراس", "سدراتة", "مداوروش", "تاورة", "سوق أهراس", "سدراتة", "مداوروش", "تاورة", "سوق أهراس", "سدراتة", "مداوروش", "تاورة"],
            "تيبازة": ["تيبازة", "القليعة", "الشراقة", "الدويرة", "تيبازة", "القليعة", "الشراقة", "الدويرة", "تيبازة", "القليعة", "الشراقة", "الدويرة", "تيبازة", "القليعة", "الشراقة", "الدويرة", "تيبازة", "القليعة", "الشراقة", "الدويرة"],
            "ميلة": ["ميلة", "فرجيوة", "شلغوم العيد", "تاجنانت", "ميلة", "فرجيوة", "شلغوم العيد", "تاجنانت", "ميلة", "فرجيوة", "شلغوم العيد", "تاجنانت", "ميلة", "فرجيوة", "شلغوم العيد", "تاجنانت"],
            "عين الدفلى": ["عين الدفلى", "الخميس مليانة", "رويبة", "عين الدفلى", "الخميس مليانة", "رويبة", "عين الدفلى", "الخميس مليانة", "رويبة", "عين الدفلى", "الخميس مليانة", "رويبة"],
            "النعامة": ["النعامة", "مشرية", "عين صفراء", "عسلة", "النعامة", "مشرية", "عين صفراء", "عسلة", "النعامة", "مشرية", "عين صفراء", "عسلة"],
            "عين تموشنت": ["عين تموشنت", "حمام بوحجر", "بني صاف", "عين تموشنت", "حمام بوحجر", "بني صاف", "عين تموشنت", "حمام بوحجر", "بني صاف"],
            "غليزان": ["غليزان", "يلل", "حد الشكالة", "غليزان", "يلل", "حد الشكالة", "غليزان", "يلل", "حد الشكالة"]
        };

        // ==================== تهيئة المنتجات ====================
        if (!localStorage.getItem('shop_products')) {
            const sampleProducts = [
                { 
                    id: 1, 
                    name: "آيفون 14 برو", 
                    description: "هاتف ذكي بشاشة 6.1 بوصة وكاميرا احترافية", 
                    price: 120000, 
                    images: [
                        "https://images.unsplash.com/photo-1663499482523-1c0c1bae4ce1?w=400",
                        "https://images.unsplash.com/photo-1663499482523-1c0c1bae4ce1?w=400&angle=1",
                        "https://images.unsplash.com/photo-1663499482523-1c0c1bae4ce1?w=400&angle=2"
                    ],
                    category: "phones"
                },
                { 
                    id: 2, 
                    name: "ماك بوك برو", 
                    description: "شاشة ريتينا 13 بوصة، معالج M2", 
                    price: 250000, 
                    images: [
                        "https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=400",
                        "https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=400&angle=1"
                    ],
                    category: "computers"
                },
                { 
                    id: 3, 
                    name: "ساعة آبل", 
                    description: "ساعة ذكية بميزة قياس الأكسجين", 
                    price: 45000, 
                    images: [
                        "https://images.unsplash.com/photo-1434493789847-2f02dc6ca35d?w=400"
                    ],
                    category: "electronics"
                }
            ];
            localStorage.setItem('shop_products', JSON.stringify(sampleProducts));
        }

        // ==================== أسعار التوصيل ====================
        const defaultDeliveryPrices = {
            "أدرار": 800, "الشلف": 500, "الأغواط": 650, "أم البواقي": 650, "بجاية": 600,
            "بسكرة": 650, "بشار": 800, "البليدة": 400, "البويرة": 550, "تامنراست": 1000,
            "تبسة": 700, "تلمسان": 600, "تيارت": 600, "تيزي وزو": 550, "الجزائر": 400,
            "الجلفة": 650, "جيجل": 600, "سطيف": 550, "سعيدة": 600, "سكيكدة": 600,
            "سيدي بلعباس": 550, "عنابة": 600, "قالمة": 600, "قسنطينة": 550, "المدية": 500,
            "مستغانم": 550, "المسيلة": 600, "معسكر": 550, "ورقلة": 750, "وهران": 500,
            "البيض": 700, "إليزي": 950, "برج بوعريريج": 600, "بومرداس": 450, "الطارف": 650,
            "تندوف": 900, "تيسمسيلت": 600, "الوادي": 700, "خنشلة": 650, "سوق أهراس": 650,
            "تيبازة": 450, "ميلة": 600, "عين الدفلى": 550, "النعامة": 700, "عين تموشنت": 550,
            "غليزان": 550
        };

        if (!localStorage.getItem('delivery_prices')) {
            localStorage.setItem('delivery_prices', JSON.stringify(defaultDeliveryPrices));
        }

        // ==================== الفئات ====================
        const categories = [
            { id: 'all', name: 'الكل', icon: 'fa-store', color: 'from-blue-500 to-purple-500' },
            { id: 'electronics', name: 'إلكترونيات', icon: 'fa-bolt', color: 'from-yellow-500 to-orange-500' },
            { id: 'computers', name: 'حواسيب', icon: 'fa-laptop', color: 'from-green-500 to-teal-500' },
            { id: 'phones', name: 'هواتف', icon: 'fa-mobile-alt', color: 'from-purple-500 to-pink-500' },
            { id: 'gaming', name: 'شحن ألعاب', icon: 'fa-gamepad', color: 'from-red-500 to-pink-500' },
            { id: 'accessories', name: 'إكسسوارات', icon: 'fa-headphones', color: 'from-indigo-500 to-blue-500' }
        ];

        // ==================== مكون بطاقة المنتج ====================
        const ProductCard = ({ product, onAddToCart }) => {
            const [currentImageIndex, setCurrentImageIndex] = React.useState(0);
            const images = product.images || [product.image || 'https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400'];

            const nextImage = (e) => {
                e.stopPropagation();
                setCurrentImageIndex((prev) => (prev + 1) % images.length);
            };

            const prevImage = (e) => {
                e.stopPropagation();
                setCurrentImageIndex((prev) => (prev - 1 + images.length) % images.length);
            };

            return (
                <div className="product-card">
                    <div className="image-gallery">
                        <img 
                            src={images[currentImageIndex]} 
                            alt={product.name}
                            className="gallery-main-image"
                        />
                        
                        {images.length > 1 && (
                            <>
                                <button onClick={prevImage} className="gallery-nav prev">
                                    <i className="fas fa-chevron-right"></i>
                                </button>
                                <button onClick={nextImage} className="gallery-nav next">
                                    <i className="fas fa-chevron-left"></i>
                                </button>
                                
                                <div className="gallery-thumbnails">
                                    {images.map((img, index) => (
                                        <img
                                            key={index}
                                            src={img}
                                            alt={`${product.name} - ${index + 1}`}
                                            className={`gallery-thumbnail ${index === currentImageIndex ? 'active' : ''}`}
                                            onClick={(e) => {
                                                e.stopPropagation();
                                                setCurrentImageIndex(index);
                                            }}
                                        />
                                    ))}
                                </div>
                            </>
                        )}
                    </div>
                    
                    <div className="p-4 flex-1 flex flex-col">
                        <h3 className="text-lg font-bold text-gray-800 mb-2">{product.name}</h3>
                        <p className="text-gray-600 text-sm mb-3 line-clamp-2 flex-1">{product.description}</p>
                        <div className="flex justify-between items-center mt-auto">
                            <span className="text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">
                                {product.price.toLocaleString()} <span className="text-xs">دج</span>
                            </span>
                            <button
                                onClick={() => onAddToCart(product)}
                                className="bg-gradient-to-r from-blue-500 to-purple-500 text-white px-5 py-3 rounded-xl font-bold text-sm hover:from-blue-600 hover:to-purple-600 active:scale-95 transition-all duration-300 shadow-lg"
                            >
                                <i className="fas fa-cart-plus ml-1"></i>
                                أضف
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // ==================== مكون المتجر الرئيسي ====================
        const Store = () => {
            const [products, setProducts] = React.useState([]);
            const [selectedCategory, setSelectedCategory] = React.useState('all');
            const [cart, setCart] = React.useState([]);
            const [showCheckout, setShowCheckout] = React.useState(false);
            const [toast, setToast] = React.useState(null);
            const [showConfirmation, setShowConfirmation] = React.useState(false);
            const [confirmedOrder, setConfirmedOrder] = React.useState(null);
            const [searchQuery, setSearchQuery] = React.useState('');
            const [deliveryPrices, setDeliveryPrices] = React.useState({});
            const [orderForm, setOrderForm] = React.useState({
                firstName: '', lastName: '', phone: '', wilaya: '', commune: '', deliveryType: 'home'
            });
            const [formErrors, setFormErrors] = React.useState({});

            React.useEffect(() => {
                loadData();
                const interval = setInterval(loadData, 3000);
                return () => clearInterval(interval);
            }, []);

            const loadData = () => {
                const pData = localStorage.getItem('shop_products');
                if (pData) setProducts(JSON.parse(pData));
                
                const dData = localStorage.getItem('delivery_prices');
                if (dData) setDeliveryPrices(JSON.parse(dData));
            };

            const filteredProducts = products.filter(p => {
                const matchesSearch = p.name?.toLowerCase().includes(searchQuery.toLowerCase()) || false;
                const matchesCategory = selectedCategory === 'all' || p.category === selectedCategory;
                return matchesSearch && matchesCategory;
            });

            const addToCart = (product) => {
                const existing = cart.find(item => item.id === product.id);
                if (existing) {
                    setCart(cart.map(item => 
                        item.id === product.id ? {...item, quantity: item.quantity + 1} : item
                    ));
                } else {
                    setCart([...cart, {...product, quantity: 1}]);
                }
                showToast('✅ تمت الإضافة للسلة', 'success');
                
                setTimeout(() => {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }, 300);
            };

            const updateQuantity = (id, quantity) => {
                if (quantity <= 0) {
                    setCart(cart.filter(item => item.id !== id));
                } else {
                    setCart(cart.map(item => item.id === id ? {...item, quantity} : item));
                }
            };

            const showToast = (msg, type = 'success') => {
                setToast({ msg, type });
                setTimeout(() => setToast(null), 3000);
            };

            const validateForm = () => {
                const errors = {};
                if (!orderForm.firstName.trim()) errors.firstName = 'الاسم مطلوب';
                if (!orderForm.lastName.trim()) errors.lastName = 'اللقب مطلوب';
                if (!orderForm.phone.trim()) errors.phone = 'رقم الهاتف مطلوب';
                else if (!/^[0-9]{10,15}$/.test(orderForm.phone.replace(/\s/g, ''))) {
                    errors.phone = 'رقم هاتف غير صحيح';
                }
                if (!orderForm.wilaya) errors.wilaya = 'اختر الولاية';
                if (!orderForm.commune) errors.commune = 'اختر البلدية';
                
                setFormErrors(errors);
                return Object.keys(errors).length === 0;
            };

            const submitOrder = () => {
                if (!validateForm()) {
                    showToast('⚠️ الرجاء تصحيح الأخطاء في النموذج', 'error');
                    return;
                }

                if (cart.length === 0) {
                    showToast('⚠️ السلة فارغة', 'error');
                    return;
                }

                const deliveryPrice = deliveryPrices[orderForm.wilaya] || 500;
                const productsTotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const totalWithDelivery = productsTotal + deliveryPrice;

                const order = {
                    id: Date.now(),
                    ...orderForm,
                    items: cart,
                    total: productsTotal,
                    deliveryTotal: deliveryPrice,
                    status: 'pending',
                    createdAt: new Date().toISOString()
                };

                // حفظ الطلب
                const ordersData = localStorage.getItem('shop_orders');
                const orders = ordersData ? JSON.parse(ordersData) : [];
                localStorage.setItem('shop_orders', JSON.stringify([...orders, order]));

                // إرسال للبائع (رقمك)
                const sellerPhone = "0779774207";
                const sellerMessage = `🛍️ *طلب جديد*\n\n` +
                    `👤 *الزبون:* ${orderForm.firstName} ${orderForm.lastName}\n` +
                    `📞 *الهاتف:* ${orderForm.phone}\n` +
                    `📍 *العنوان:* ${orderForm.wilaya} - ${orderForm.commune}\n` +
                    `🚚 *التوصيل:* ${orderForm.deliveryType === 'home' ? '🏠 للمنزل' : '🏢 للمكتب'}\n\n` +
                    `📦 *المنتجات:*\n${cart.map(item => `• ${item.name} x${item.quantity}`).join('\n')}\n\n` +
                    `💰 *الإجمالي:* ${totalWithDelivery.toLocaleString()} دج\n` +
                    `🆔 *رقم الطلب:* ${order.id}`;

                const sellerWhatsappUrl = `https://wa.me/${sellerPhone}?text=${encodeURIComponent(sellerMessage)}`;
                window.open(sellerWhatsappUrl, '_blank');

                // عرض رسالة التأكيد للزبون
                setConfirmedOrder({
                    ...order,
                    totalWithDelivery
                });
                
                setShowConfirmation(true);
                setShowCheckout(false);
                
                // تفريغ السلة
                setCart([]);
                setOrderForm({ firstName: '', lastName: '', phone: '', wilaya: '', commune: '', deliveryType: 'home' });
            };

            const deliveryPrice = deliveryPrices[orderForm.wilaya] || 500;
            const productsTotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const totalWithDelivery = productsTotal + deliveryPrice;

            return (
                <div className="relative min-h-screen pb-20">
                    {/* الهيدر */}
                    <header className="sticky top-0 z-50 bg-gradient-to-r from-gray-900 via-purple-900 to-gray-900 text-white shadow-2xl">
                        <div className="px-4 py-3">
                            <div className="flex justify-between items-center mb-3">
                                <h1 className="text-2xl font-black bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
                                    <i className="fas fa-store-alt ml-1"></i>
                                    Technology Shop
                                </h1>
                                <button 
                                    onClick={() => setShowCheckout(true)} 
                                    disabled={cart.length === 0}
                                    className="cart-button relative bg-white text-gray-900 px-4 py-3 rounded-full font-bold active:scale-95 transition-all duration-300 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"
                                >
                                    <i className="fas fa-shopping-cart text-xl"></i>
                                    {cart.length > 0 && (
                                        <span className="cart-badge">
                                            {cart.length}
                                        </span>
                                    )}
                                </button>
                            </div>
                            
                            {/* شريط البحث */}
                            <div className="relative">
                                <i className="fas fa-search absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                <input 
                                    type="text" 
                                    placeholder="🔍 ابحث عن منتج..." 
                                    value={searchQuery}
                                    onChange={(e) => setSearchQuery(e.target.value)}
                                    className="w-full pr-12 pl-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all text-sm"
                                />
                            </div>
                        </div>
                    </header>

                    {/* الفئات - تمرير أفقي */}
                    <div className="categories-scroll px-4 py-4">
                        <div className="flex gap-2">
                            {categories.map(cat => (
                                <button
                                    key={cat.id}
                                    onClick={() => setSelectedCategory(cat.id)}
                                    className={`flex-shrink-0 px-5 py-3 rounded-xl font-bold text-sm transition-all duration-300 ${
                                        selectedCategory === cat.id
                                            ? `bg-gradient-to-r ${cat.color} text-white shadow-xl`
                                            : 'bg-white/80 backdrop-blur-sm text-gray-700'
                                    }`}
                                >
                                    <i className={`fas ${cat.icon} ml-1`}></i>
                                    {cat.name}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* المنتجات - شبكة متجاوبة */}
                    <div className="px-4 pb-8">
                        {filteredProducts.length === 0 ? (
                            <div className="bg-white/80 backdrop-blur-sm rounded-3xl p-8 text-center">
                                <i className="fas fa-box-open text-5xl text-gray-400 mb-3"></i>
                                <p className="text-lg text-gray-600 font-bold">لا توجد منتجات</p>
                            </div>
                        ) : (
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                                {filteredProducts.map(product => (
                                    <ProductCard 
                                        key={product.id} 
                                        product={product} 
                                        onAddToCart={addToCart}
                                    />
                                ))}
                            </div>
                        )}
                    </div>

                    {/* نافذة السلة والطلب */}
                    {showCheckout && (
                        <div className="fixed inset-0 bg-black/75 backdrop-blur-sm flex items-end sm:items-center justify-center p-0 sm:p-4 z-50" onClick={() => setShowCheckout(false)}>
                            <div className="bg-white rounded-t-3xl sm:rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-5 slide-up" onClick={(e) => e.stopPropagation()}>
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-2xl font-black bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                                        <i className="fas fa-shopping-bag ml-2"></i>
                                        طلبك
                                    </h2>
                                    <button onClick={() => setShowCheckout(false)} className="p-2">
                                        <i className="fas fa-times text-gray-500 text-xl"></i>
                                    </button>
                                </div>

                                {/* المنتجات في السلة */}
                                <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-4">
                                    {cart.map(item => (
                                        <div key={item.id} className="flex items-center justify-between border-b border-gray-200 py-3">
                                            <div className="flex-1 min-w-0">
                                                <p className="font-bold text-sm truncate">{item.name}</p>
                                                <p className="text-xs text-gray-600">{item.price.toLocaleString()} دج</p>
                                            </div>
                                            <div className="flex items-center gap-2">
                                                <button
                                                    onClick={() => updateQuantity(item.id, item.quantity - 1)}
                                                    className="w-8 h-8 rounded-lg bg-red-500 text-white font-bold active:bg-red-600 flex items-center justify-center"
                                                >
                                                    <i className="fas fa-minus text-xs"></i>
                                                </button>
                                                <span className="w-6 text-center font-bold">{item.quantity}</span>
                                                <button
                                                    onClick={() => updateQuantity(item.id, item.quantity + 1)}
                                                    className="w-8 h-8 rounded-lg bg-green-500 text-white font-bold active:bg-green-600 flex items-center justify-center"
                                                >
                                                    <i className="fas fa-plus text-xs"></i>
                                                </button>
                                                <span className="w-16 text-left font-bold text-blue-600 text-sm">
                                                    {(item.price * item.quantity).toLocaleString()} دج
                                                </span>
                                            </div>
                                        </div>
                                    ))}
                                    
                                    {/* إجمالي السعر */}
                                    <div className="mt-4 pt-3 border-t-2 border-gray-300">
                                        <div className="flex justify-between text-sm mb-1">
                                            <span>المنتجات:</span>
                                            <span className="font-bold">{productsTotal.toLocaleString()} دج</span>
                                        </div>
                                        <div className="flex justify-between text-sm mb-1">
                                            <span>التوصيل:</span>
                                            <span className="font-bold text-green-600">{deliveryPrice.toLocaleString()} دج</span>
                                        </div>
                                        <div className="flex justify-between text-lg font-black text-blue-600">
                                            <span>الإجمالي:</span>
                                            <span>{totalWithDelivery.toLocaleString()} دج</span>
                                        </div>
                                    </div>
                                </div>

                                {/* نموذج الطلب */}
                                <div className="space-y-3">
                                    <div className="grid grid-cols-2 gap-2">
                                        <div>
                                            <input
                                                type="text"
                                                placeholder="الاسم"
                                                value={orderForm.firstName}
                                                onChange={(e) => setOrderForm({...orderForm, firstName: e.target.value})}
                                                className={`form-input ${formErrors.firstName ? 'error' : ''}`}
                                            />
                                            {formErrors.firstName && <p className="text-red-500 text-xs mt-1">{formErrors.firstName}</p>}
                                        </div>
                                        <div>
                                            <input
                                                type="text"
                                                placeholder="اللقب"
                                                value={orderForm.lastName}
                                                onChange={(e) => setOrderForm({...orderForm, lastName: e.target.value})}
                                                className={`form-input ${formErrors.lastName ? 'error' : ''}`}
                                            />
                                            {formErrors.lastName && <p className="text-red-500 text-xs mt-1">{formErrors.lastName}</p>}
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <input
                                            type="tel"
                                            placeholder="رقم الهاتف"
                                            value={orderForm.phone}
                                            onChange={(e) => setOrderForm({...orderForm, phone: e.target.value})}
                                            className={`form-input ${formErrors.phone ? 'error' : ''}`}
                                        />
                                        {formErrors.phone && <p className="text-red-500 text-xs mt-1">{formErrors.phone}</p>}
                                    </div>

                                    <div className="grid grid-cols-2 gap-2">
                                        <div>
                                            <select
                                                value={orderForm.wilaya}
                                                onChange={(e) => setOrderForm({...orderForm, wilaya: e.target.value, commune: ''})}
                                                className={`form-input ${formErrors.wilaya ? 'error' : ''}`}
                                            >
                                                <option value="">الولاية</option>
                                                {Object.keys(algeriaCommunes).sort().map(w => (
                                                    <option key={w} value={w}>{w}</option>
                                                ))}
                                            </select>
                                            {formErrors.wilaya && <p className="text-red-500 text-xs mt-1">{formErrors.wilaya}</p>}
                                        </div>

                                        <div>
                                            {orderForm.wilaya && (
                                                <select
                                                    value={orderForm.commune}
                                                    onChange={(e) => setOrderForm({...orderForm, commune: e.target.value})}
                                                    className={`form-input ${formErrors.commune ? 'error' : ''}`}
                                                >
                                                    <option value="">البلدية</option>
                                                    {algeriaCommunes[orderForm.wilaya].map(c => (
                                                        <option key={c} value={c}>{c}</option>
                                                    ))}
                                                </select>
                                            )}
                                            {formErrors.commune && <p className="text-red-500 text-xs mt-1">{formErrors.commune}</p>}
                                        </div>
                                    </div>

                                    <div className="flex gap-2">
                                        <label className={`flex-1 border-2 rounded-xl p-3 flex items-center justify-center gap-2 ${
                                            orderForm.deliveryType === 'home' ? 'border-blue-500 bg-blue-50' : 'border-gray-200'
                                        }`}>
                                            <input
                                                type="radio"
                                                name="delivery"
                                                value="home"
                                                checked={orderForm.deliveryType === 'home'}
                                                onChange={(e) => setOrderForm({...orderForm, deliveryType: e.target.value})}
                                                className="hidden"
                                            />
                                            <i className="fas fa-home text-blue-500"></i>
                                            <span className="text-sm font-bold">منزل</span>
                                        </label>
                                        <label className={`flex-1 border-2 rounded-xl p-3 flex items-center justify-center gap-2 ${
                                            orderForm.deliveryType === 'office' ? 'border-blue-500 bg-blue-50' : 'border-gray-200'
                                        }`}>
                                            <input
                                                type="radio"
                                                name="delivery"
                                                value="office"
                                                checked={orderForm.deliveryType === 'office'}
                                                onChange={(e) => setOrderForm({...orderForm, deliveryType: e.target.value})}
                                                className="hidden"
                                            />
                                            <i className="fas fa-building text-purple-500"></i>
                                            <span className="text-sm font-bold">مكتب</span>
                                        </label>
                                    </div>

                                    <button
                                        onClick={submitOrder}
                                        className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white p-4 rounded-xl font-bold text-lg active:scale-95 transition-all duration-300 shadow-xl"
                                    >
                                        <i className="fab fa-whatsapp ml-2"></i>
                                        تأكيد الطلب
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* نافذة تأكيد الطلب للزبون */}
                    {showConfirmation && confirmedOrder && (
                        <>
                            <div className="confirmation-overlay" onClick={() => setShowConfirmation(false)}></div>
                            <div className="confirmation-message">
                                <div className="checkmark">
                                    <i className="fas fa-check"></i>
                                </div>
                                
                                <h2 className="text-2xl font-black mb-3">🎉 تم استلام طلبك!</h2>
                                
                                <p className="text-gray-600 mb-4 text-sm">
                                    شكراً لتسوقك مع Technology Shop
                                </p>
                                
                                <div className="bg-blue-50 rounded-xl p-4 mb-4 text-right text-sm">
                                    <p className="font-bold mb-2">📋 معلومات الطلب:</p>
                                    <p className="mb-1"><span className="font-bold">الاسم:</span> {confirmedOrder.firstName} {confirmedOrder.lastName}</p>
                                    <p className="mb-1"><span className="font-bold">رقم الهاتف:</span> {confirmedOrder.phone}</p>
                                    <p className="mb-1"><span className="font-bold">العنوان:</span> {confirmedOrder.wilaya} - {confirmedOrder.commune}</p>
                                    <p className="mb-1"><span className="font-bold">نوع التوصيل:</span> {confirmedOrder.deliveryType === 'home' ? '🏠 للمنزل' : '🏢 للمكتب'}</p>
                                    <p className="mb-1"><span className="font-bold">رقم الطلب:</span> #{confirmedOrder.id}</p>
                                    <p className="mt-3 pt-2 border-t border-blue-200">
                                        <span className="font-bold">💰 الإجمالي:</span> {confirmedOrder.totalWithDelivery.toLocaleString()} دج
                                    </p>
                                </div>
                                
                                <div className="bg-green-50 border border-green-200 rounded-xl p-4 mb-5">
                                    <p className="text-green-700 font-bold flex items-center gap-2">
                                        <i className="fas fa-phone-alt"></i>
                                        سنتصل بك لتأكيد الطلب في غضون 24 ساعة
                                    </p>
                                </div>
                                
                                <div className="flex gap-3">
                                    <button
                                        onClick={() => setShowConfirmation(false)}
                                        className="flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white p-4 rounded-xl font-bold active:scale-95 transition-all duration-300 shadow-lg"
                                    >
                                        <i className="fas fa-shopping-bag ml-2"></i>
                                        متابعة التسوق
                                    </button>
                                </div>
                            </div>
                        </>
                    )}

                    {/* الفوتر */}
                    <footer className="bg-gradient-to-r from-gray-900 to-gray-800 text-white py-6 mt-8">
                        <div className="px-4 text-center">
                            <p className="text-sm mb-3">© 2025 Technology Shop - جميع الحقوق محفوظة</p>
                            <div className="inline-flex items-center gap-2 bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-2 rounded-full text-sm font-bold">
                                <i className="fas fa-heart text-red-300 animate-pulse"></i>
                                <span>يحي لحمر</span>
                                <i className="fas fa-code text-yellow-300"></i>
                            </div>
                        </div>
                    </footer>

                    {/* رسائل التنبيه */}
                    {toast && (
                        <div className={`fixed bottom-4 left-4 right-4 px-5 py-3 rounded-xl text-white font-bold shadow-2xl z-50 text-sm ${
                            toast.type === 'error' ? 'bg-red-500' : 'bg-green-500'
                        }`}>
                            <i className={`ml-2 fas ${toast.type === 'error' ? 'fa-exclamation-circle' : 'fa-check-circle'}`}></i>
                            {toast.msg}
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<Store />, document.getElementById('root'));
    </script>
</body>
</html>